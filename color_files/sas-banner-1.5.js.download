var sas=window.sas||{};sas.rtbBanner=sas.rtbBanner||{},sas.creativeType={REDIRECT:0,IMAGE:1,FLASH:2,FLV:3,HTML5:4},function(){var e={};sas.events.addEvent(window,"message",function(t){if(t.data&&e[t.data]){var a={clickUrls:e[t.data].clickUrlArray,isSmart:!0};t.source.postMessage(JSON.stringify(a),"*")}});var t=function(e,t,a){var n=document.createElement("iframe");return n.id=e,n.scrolling="no",n.frameBorder=0,n.width=t,n.height=a,n.style.display="block",n.style.margin="0 auto",n.style.padding=0,n.style.width=t+"px",n.style.height=a+"px",n},a=function(e){var t=e.instanceIndex>1?"_"+e.instanceIndex:"";return e.tagId||"sas_"+e.formatId+t},n=function(e,t,a){t.addEventListener?t.addEventListener(e,a,!1):t.attachEvent?t.attachEvent("on"+e,a):t[e]=a},i=function(e){var t=(new Date).getTime(),a=sas.lastClickPixel||0;return t-a>100&&((new Image).src=sas.clickPixels[e.id]+"&rnd="+(new Date).getTime(),sas.lastClickPixel=t),!0},r=function(e,a,r,s){var o=a.creatives[0],d=t("sas_"+a.id+"_iframe",o.width,o.height);sas.events.addLoadEvent(d,function(){r(d)}),e.appendChild(d),sas.clickPixels=sas.clickPixels||{},sas.clickPixels[a.id]=a.creatives[0].clickCountPixelUrl;var c=d.contentWindow||d,l=d.contentDocument||d.contentWindow.document,f=function(e,t,a){return function(){!function(a,n){function i(){if(!o){o=!0;for(var t=0;t<s.length;t++)s[t].fn.call(e,s[t].ctx);s=[]}}function r(){"complete"===t.readyState&&i()}a=a||"docReady",n=n||e;var s=[],o=!1,d=!1;n[a]=function(a,n){return o?void setTimeout(function(){a(n)},1):(s.push({fn:a,ctx:n}),void("complete"===t.readyState||!t.attachEvent&&"interactive"===t.readyState?setTimeout(i,1):d||(t.addEventListener?(t.addEventListener("DOMContentLoaded",i,!1),e.addEventListener("load",i,!1)):(t.attachEvent("onreadystatechange",r),e.attachEvent("onload",i)),d=!0)))}}("iframeReady",e),e.iframeReady(function(){var e=t.getElementsByTagName("iframe");if(e.length){sas.overIframe=!1;for(var r in e){var s=e[r];s.onmouseover=function(){sas.overIframe=!0},s.onmouseout=function(){sas.overIframe=!1,window.top.focus()},n("blur",window.top,function(){sas.overIframe&&i(a)})}}})}}(c,l,a);l.write('<!DOCTYPE html><head><script>var inDapIF=true<\/script></head><body style="padding:0;margin:0">'+o.creativeScript+a.customScript+"</body></html>"),f(),n("click",l,function(e){i(a)});var v=sas.utils.getIEVersion();(!v||v>9)&&l.close()};sas.utils=sas.utils||{},sas.utils.getIEVersion=function(){var e=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return e?parseInt(e[1]):void 0};var s=[];sas.events.addLoadEvent(document,function(){window._loaded=!0,s.push=function(e){e()};for(var e=0;e<s.length;e++)s[e]()});var o={};o[sas.creativeType.REDIRECT]=r;var d=function(e){var t=parseInt(1e8*Math.random()),a=2===e.oba?"top-left":"top-right";sas.utils.loadLinkCdn("diff/templates/js/adplayer/adplayer.css"),sas.utils.loadScriptCdn(["diff/templates/js/adplayer/adplayer.js","diff/templates/js/adplayer/adplayer.sas.js"],{onLoad:function(){$ADP.sas.addOba(e.formatId,!1,a,t,e.formatId,t)}})},c=function(e,t,a){var n=new sas.utils.Latch(["creaLoaded","viewabilityLoaded"]);n.addListener(function(e){sas.viewability.register(e,function(){(new Image).src=t.viewability.viewUrl},{duration:t.viewability.duration,area:t.viewability.area,onError:function(){(new Image).src=t.viewability.errorUrl}})});var i=t.creatives[0];o[i.type](e,t,function(e){n.notify("creaLoaded",e)},a),i.countUrl&&((new Image).src=i.countUrl),t.viewability&&t.viewability.enabled&&sas.utils.loadScriptCdn("diff/templates/js/sas/sas-viewability-1.3.js",{onLoad:function(){n.notify("viewabilityLoaded")}}),t.oba&&d(t)};sas.rtbBanner.render=function(n,i){if(i=i||{},i.async=null===i.async?!0:i.async,!n.creatives||!n.creatives.length)throw new Error("No creative found for config "+n.id);var r=n.creatives[0];n.tagId=a(n),e[n.formatId]=r;var s=document.getElementById(n.tagId);if(!s)throw new Error("No element with id "+n.tagId+" found");if(r&&!o[r.type])throw new Error("Unsupported banner type "+r.type);if(n.forcedIframeWidth>0&&n.forcedIframeHeight>0){var d=t("sas_i"+n.tagId,n.forcedIframeWidth,n.forcedIframeHeight);sas.events.addLoadEvent(d,function(){var e=d.contentDocument||d.contentWindow.document;e.body.style.margin=0,e.body.style.padding=0,c(e.body,n,i)}),s.appendChild(d)}else c(s,n,i)}}();