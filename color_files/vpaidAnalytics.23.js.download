try {
    VpaidAnalytics(`(function(){function inIframe(){try{return window.self!==window.top}catch(e){return!0}}
    function shouldAnalyticsExists(){return(window.ignoreGetVpaidAd||typeof window.getVPAIDAd==='function')&&inIframe()}
    if(shouldAnalyticsExists()){function getAllWindowsScripts(){var scripts=document.scripts||[],result=[];for(var i=0;i<scripts.length;i++){result.push(scripts[i].src)}
    return result}
    function getAllWindowsIframes(){var iframes=document.querySelectorAll('iframe'),result=[];for(var i=0;i<iframes.length;i++){result.push(iframes[i].src)}
    return result}
    function AnalyticsReporter(vpaid,callback,options){var self=window._vaThis||this;if(!window._vaThis){self.data={};self.XHRUrls=[];self.XHRResponses=[];self.iframes=getAllWindowsIframes();self.scripts=getAllWindowsScripts();self.firstCount=self.iframes.length+self.scripts.length;self.timeoutLength=options.timeout||3000;self.callback=callback;self.adImpressionEvent='AdImpression';self.networkCallCounter=0;self.maxNetworkCalls=options.maxNetworkCalls||!1;self.networkCallsLimitExceeded=!1;self.latencies=[];self.iframesWeights={gen:8,ggl:4,pxls:2};self.isVideoUrlPublic=undefined;self.requestId=0;self.requestStartTimes={};Object.defineProperty(self,'AnalyticsData',{get:function(){return self.data},enumerable:!0,configurable:!1});if(vpaid){self.subscribeToAdImpression(vpaid)}}else{var firstScripts=getAllWindowsScripts(),firstIframes=getAllWindowsIframes();self.scripts=self.scripts.concat(firstScripts);self.iframes=self.iframes.concat(firstIframes);self.firstCount+=firstIframes.length+firstScripts.length}
    if(options){if(options.withXHR&&window.XMLHttpRequest){this.createXMLHTTPHook()}
    if(options.withIframes&&window.HTMLIFrameElement!==undefined){this.createIframesSrcHook(options)}
    if(options.withScripts&&window.HTMLScriptElement!==undefined){this.createScriptsSrcHook()}
    if(options.timeout){self.timeoutLength=options.timeout}
    if(options.iframesWeights){for(var iframeType in options.iframesWeights){self.iframesWeights[iframeType]=options.iframesWeights[iframeType]}}}
    window.destroyAnalyticsReporter=function(){self.data=self.XHRUrls=self.XHRResponses=self.iframes=self.scripts=self.timeoutLength=self.iframesWeights=self.requestStartTimes=undefined;window.getVpaidAnalyticsReport=window.destroyAnalyticsReporter=window.onNetworkCallsLimitExceeded=window.setIsVideoUrlPublic=undefined;window.AnalyticsReporter=undefined}
    window.getVpaidAnalyticsReport=function(){var self=window._vaThis||this;var totalRequests=[];var results={scripts:self.scripts.length>0?self.scripts.slice():getAllWindowsScripts(),XHRUrls:self.XHRUrls.slice(),iframes:self.iframes.slice()};for(var key in results){totalRequests=totalRequests.concat(results[key])}
    results.totalRequests=totalRequests;results.totalRequestsCounter=totalRequests.length;results.firstCount=self.firstCount;results.latencies=self.latencies.slice();var sumLatencies=results.latencies.reduce(function(sum,num){return sum+num},0);results.averageLatency=results.latencies.length?(sumLatencies/results.latencies.length):0;results.averageIntLatency=parseInt(results.averageLatency);return results}.bind(self);window.setIsVideoUrlPublic=function(value){var self=window._vaThis||this;self.isVideoUrlPublic=value}.bind(self)}
    AnalyticsReporter.prototype.subscribeToAdImpression=function(vpaid){var self=window._vaThis||this;vpaid.subscribe(function(){self.adImpFired=!0;setTimeout(function(){self.sendData()},self.timeoutLength)},self.adImpressionEvent,self)}
    AnalyticsReporter.prototype.sendData=function(){var self=window._vaThis||this;self.collectData(self.adImpressionEvent);self.callback(self.adImpressionEvent,self.AnalyticsData)}
    AnalyticsReporter.prototype.collectData=function(eventName){var self=window._vaThis||this;var results={};results.eventName=eventName;results.scripts=self.scripts.length>0?self.scripts.slice():getAllWindowsScripts();results.XHRUrls=self.XHRUrls.slice();results.XHRResponses=self.XHRResponses.slice();results.iframes=self.iframes.slice();self.data[eventName]=results};AnalyticsReporter.prototype.onUrlHooked=function(key,url,request){var self=window._vaThis||this;self[key].push(url);request._id=self.requestId++;self.requestStartTimes[request._id]=Date.now();var _onLoad=function(){if(self.requestStartTimes.hasOwnProperty(this._id)){self.latencies.push(Date.now()-self.requestStartTimes[this._id]);delete self.requestStartTimes[this._id]}
    this.removeEventListener('load',_onLoad)}.bind(request);request.addEventListener('load',_onLoad);if(key!=='iframes'||self.isVideoUrlPublic===undefined){self.networkCallCounter++}else{self.networkCallCounter+=self.getIframeWeight(url)}
    if(self.isMaxNetworkCallsLimitExceeded()){self.onNetworkCallsLimitExceeded()}}
    AnalyticsReporter.prototype.getIframeWeight=function(url){var self=window._vaThis||this;if(url.indexOf('imasdk')){return self.iframesWeights.ggl}
    if(self.isVideoUrlPublic){return self.iframesWeights.pxls}
    return self.iframesWeights.gen};AnalyticsReporter.prototype.createXMLHTTPHook=function(){var self=window._vaThis||this;window.XMLHttpRequest.prototype._vaOpen=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(method,url,async,user,password){self.onUrlHooked('XHRUrls',url,this);this.addEventListener('load',function(){self.XHRResponses.push('load: '+this.responseText)});return window.XMLHttpRequest.prototype._vaOpen.apply(this,arguments)}};AnalyticsReporter.prototype.createIframesSrcHook=function(options){var self=window._vaThis||this;Object.defineProperty(HTMLIFrameElement.prototype,'_vaSrc',Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,"src"));var onIframeSrcHooked=function(url,iframe){self.onUrlHooked('iframes',url,iframe);if(options.deepIframes){var onIframeLoaded=function(){try{iframe.removeEventListener('load',onIframeLoaded);iframe.contentWindow.ignoreGetVpaidAd=!0;iframe.contentWindow._vaThis=self;iframe.contentWindow.eval(self.vpaidAnalyticsFunc);new iframe.contentWindow.AnalyticsReporter(null,function(){},options)}catch(ex){}}
    iframe.addEventListener('load',onIframeLoaded)}}
    Object.defineProperty(HTMLIFrameElement.prototype,'src',{get:function(){return this._vaSrc},set:function(url){onIframeSrcHooked(url,this);this._vaSrc=url}});HTMLIFrameElement.prototype._vaSetAttribute=HTMLIFrameElement.prototype.setAttribute;HTMLIFrameElement.prototype.setAttribute=function(attributename,attributevalue){if(attributename==='src'){onIframeSrcHooked(attributevalue,this)}
    this._vaSetAttribute(attributename,attributevalue)}}
    AnalyticsReporter.prototype.createScriptsSrcHook=function(){var self=window._vaThis||this;Object.defineProperty(HTMLScriptElement.prototype,'_vaSrc',Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"src"));Object.defineProperty(HTMLScriptElement.prototype,'src',{get:function(){return this._vaSrc},set:function(url){self.onUrlHooked('scripts',url,this);this._vaSrc=url}});HTMLScriptElement.prototype._vaSetAttribute=HTMLScriptElement.prototype.setAttribute;HTMLScriptElement.prototype.setAttribute=function(attributename,attributevalue){if(attributename==='src'){self.onUrlHooked('scripts',attributevalue,this)}
    this._vaSetAttribute(attributename,attributevalue)}}
    AnalyticsReporter.prototype.unHook=function(){var iframeSrcHook=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,"_vaSrc");var scriptSrcHook=Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"_vaSrc");if(iframeSrcHook){Object.defineProperty(HTMLIFrameElement.prototype,'src',iframeSrcHook);HTMLIFrameElement.prototype.setAttribute=HTMLIFrameElement.prototype._vaSetAttribute}
    if(scriptSrcHook){Object.defineProperty(HTMLIFrameElement.prototype,'src',scriptSrcHook);HTMLScriptElement.prototype.setAttribute=HTMLScriptElement.prototype._vaSetAttribute}
    if(window.XMLHttpRequest.prototype._vaOpen){window.XMLHttpRequest.prototype.open=window.XMLHttpRequest.prototype._vaOpen}}
    AnalyticsReporter.prototype.onNetworkCallsLimitExceeded=function(){var self=window._vaThis||this;if(self.networkCallsLimitExceeded){return}
    if(!self.adImpFired){self.unHook()}
    self.networkCallsLimitExceeded=!0;self.sendData();window.onNetworkCallsLimitExceeded()}
    AnalyticsReporter.prototype.isMaxNetworkCallsLimitExceeded=function(){var self=window._vaThis||this;return self.networkCallsLimitExceeded||(self.maxNetworkCalls&&self.networkCallCounter>=self.maxNetworkCalls)}
    window.AnalyticsReporter=AnalyticsReporter}}())`);
} catch (e) {}